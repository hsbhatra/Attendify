{% extends 'base.html' %}

{% block title %}
    Register - Attendify
{% endblock %}

{% block content %}
<section class="register py-16 px-4 bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen flex items-center justify-center">
    <div class="max-w-md w-full animate__animated animate__fadeIn">
        <!-- Registration Card -->
        <div class="bg-white rounded-xl shadow-xl overflow-hidden">
            <!-- Card Header -->
            <div class="bg-primary-500 text-white px-8 py-6 text-center">
                <div class="w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-user-plus text-2xl"></i>
                </div>
                <h1 class="text-2xl md:text-3xl font-bold">Create Your Account</h1>
                <p class="text-primary-100 mt-2">Join Attendify in just a few steps</p>
            </div>

            <!-- Card Body -->
            <div class="p-8">
                <!-- Messages -->
                {% for message in messages %}
                <div class="mb-6 p-4 rounded-lg {% if message.tags == 'error' %}bg-red-50 text-red-700{% else %}bg-blue-50 text-blue-700{% endif %} animate__animated animate__fadeIn">
                    <div class="flex items-center">
                        <i class="fas {% if message.tags == 'error' %}fa-exclamation-circle{% else %}fa-check-circle{% endif %} mr-3"></i>
                        <span>{{ message }}</span>
                    </div>
                </div>
                {% endfor %}

                <!-- Registration Form -->
                <form action="{% url 'register' %}" method="post" class="space-y-4">
                    {% csrf_token %}
                    
                    <!-- Name Fields -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="space-y-2">
                            <label for="fname" class="block text-gray-700 font-medium">
                                <i class="fas fa-user mr-2 text-primary-500"></i> First Name
                            </label>
                            <input type="text" id="fname" name="fname" placeholder="John" 
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"
                                   required autofocus>
                        </div>
                        <div class="space-y-2">
                            <label for="lname" class="block text-gray-700 font-medium">
                                Last Name
                            </label>
                            <input type="text" id="lname" name="lname" placeholder="Doe" 
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"
                                   required>
                        </div>
                    </div>

                    <!-- Username -->
                    <div class="space-y-2">
                        <label for="username" class="block text-gray-700 font-medium">
                            <i class="fas fa-at mr-2 text-primary-500"></i> Username
                        </label>
                        <input type="text" id="username" name="username" placeholder="johndoe123" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"
                               required>
                        <p class="text-xs text-gray-500">Must be 4-20 characters, letters and numbers only</p>
                    </div>

                    <!-- Email -->
                    <div class="space-y-2">
                        <label for="email" class="block text-gray-700 font-medium">
                            <i class="fas fa-envelope mr-2 text-primary-500"></i> Email
                        </label>
                        <input type="email" id="email" name="email" placeholder="john@example.com" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"
                               required>
                    </div>

                    <!-- Password -->
                    <div class="space-y-2">
                        <label for="password" class="block text-gray-700 font-medium">
                            <i class="fas fa-lock mr-2 text-primary-500"></i> Password
                        </label>
                        <div class="relative">
                            <input type="password" id="password" name="password" placeholder="••••••••" 
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all pl-10"
                                   required>
                            <i class="fas fa-lock absolute left-3 top-3.5 text-gray-400"></i>
                        </div>
                        <div class="grid grid-cols-4 gap-2 mt-2">
                            <div class="h-1 rounded-sm bg-gray-200" id="pw-strength-1"></div>
                            <div class="h-1 rounded-sm bg-gray-200" id="pw-strength-2"></div>
                            <div class="h-1 rounded-sm bg-gray-200" id="pw-strength-3"></div>
                            <div class="h-1 rounded-sm bg-gray-200" id="pw-strength-4"></div>
                        </div>
                        <p class="text-xs text-gray-500">Use 8+ characters with a mix of letters, numbers & symbols</p>
                    </div>

                    <!-- Confirm Password -->
                    <div class="space-y-2">
                        <label for="conf-password" class="block text-gray-700 font-medium">
                            <i class="fas fa-lock mr-2 text-primary-500"></i> Confirm Password
                        </label>
                        <div class="relative">
                            <input type="password" id="conf-password" name="conf-password" placeholder="••••••••" 
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all pl-10"
                                   required>
                            <i class="fas fa-lock absolute left-3 top-3.5 text-gray-400"></i>
                        </div>
                    </div>

                    <!-- Submit Button -->
                    <button type="submit" class="w-full bg-primary-500 hover:bg-primary-600 text-white font-medium py-3 px-6 rounded-lg shadow-md transition-all duration-300 transform hover:-translate-y-1 flex items-center justify-center mt-6">
                        <i class="fas fa-user-plus mr-2"></i> Create Account
                    </button>
                </form>

                <!-- Divider -->
                <div class="relative my-6">
                    <div class="absolute inset-0 flex items-center">
                        <div class="w-full border-t border-gray-300"></div>
                    </div>
                    <div class="relative flex justify-center text-sm">
                        <span class="px-2 bg-white text-gray-500">
                            Already have an account?
                        </span>
                    </div>
                </div>

                <!-- Login Link -->
                <div class="text-center">
                    <a href="{% url 'login' %}" class="text-primary-500 hover:text-primary-600 font-medium inline-flex items-center">
                        <i class="fas fa-sign-in-alt mr-2"></i> Sign in to your account
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
    .register {
        background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%234361ee" fill-opacity="0.05" d="M0,192L48,197.3C96,203,192,213,288,229.3C384,245,480,267,576,250.7C672,235,768,181,864,181.3C960,181,1056,235,1152,234.7C1248,235,1344,181,1392,154.7L1440,128L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>');
        background-position: bottom;
        background-repeat: no-repeat;
        background-size: contain;
    }
</style>

<script>
    // Password strength indicator
    document.getElementById('password').addEventListener('input', function() {
        const strengthBars = [
            document.getElementById('pw-strength-1'),
            document.getElementById('pw-strength-2'),
            document.getElementById('pw-strength-3'),
            document.getElementById('pw-strength-4')
        ];
        
        const password = this.value;
        let strength = 0;
        
        // Length check
        if (password.length > 0) strength++;
        if (password.length >= 8) strength++;
        
        // Complexity checks
        if (/[A-Z]/.test(password)) strength++;
        if (/\d/.test(password) || /[^A-Za-z0-9]/.test(password)) strength++;
        
        // Update bars
        strengthBars.forEach((bar, index) => {
            bar.className = `h-1 rounded-sm ${index < strength ? 
                (strength < 2 ? 'bg-red-400' : 
                 strength < 3 ? 'bg-yellow-400' : 'bg-green-400') : 'bg-gray-200'}`;
        });
    });
</script>
{% endblock %}