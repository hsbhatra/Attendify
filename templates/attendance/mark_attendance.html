{% extends 'base.html' %}
{% block title %} Mark Attendance {% endblock %}

{% block content %}
<section class="mark-attendance-section py-20 bg-gray-100 text-center">
    {% if user.is_authenticated %}
    <div class="container mx-auto">
        <h1 class="text-4xl font-bold text-gray-800 mb-6 animate__animated animate__fadeInDown">Mark Your Attendance</h1>
        <p class="text-lg text-gray-600 mb-8 animate__animated animate__fadeIn">Scan the QR code below to mark your attendance.</p>

        <div class="flex justify-center mb-8 animate__animated animate__zoomIn">
            <img src="data:image/png;base64,{{ qr_code }}" alt="QR Code"
                class="max-w-md w-full h-auto rounded-lg shadow-lg">
        </div>
        
        <p class="text-gray-500 animate__animated animate__fadeIn">The QR code refreshes every 15 seconds.</p>
    </div>

    <script>
        // Reload the page every 15 seconds
        setInterval(function() {
            location.reload();
        }, 15000);
    </script>
    {% else %}
    <div class="container mx-auto">
        <h2 class="text-2xl font-semibold text-gray-800">You need to be logged in to mark attendance.</h2>
        <p class="text-gray-500">Please <a href="{% url 'login' %}" class="text-blue-600 underline">log in</a> to access this feature.</p>
    </div>
    {% endif %}
</section>
{% endblock %}
